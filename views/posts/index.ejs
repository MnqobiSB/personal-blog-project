<% layout('layouts/boilerplate') -%>
<!-- PAGE HEADER -->
<header id="page-header">
	<div class="container">
		<div class="jumbotron jumbotron-fluid blog-jumbotron">
		  	<div class="container">
		    	<h1 class="font-italic page-title">View All Of Our Awesome Posts</h1>
		    	<p class="lead">Browse through our latest posts packed with high value insights.</p>
		  	</div>
		</div>
	</div>
</header>
<!-- PAGE HEADER -->

<!-- MAIN SECTION START -->
<main
	id="main"
	class="main container"
	tabindex="-1"
	role="main"
>

	<nav class="breadcrumbNav" aria-label="breadcrumb">
  		<ol class="breadcrumb">
    		<li class="breadcrumb-item"><a class="color-blue" href="/">Home</a></li>
    		<li class="breadcrumb-item active" aria-current="page">Blog</li>
  		</ol>
	</nav>

  	<div class="row"><!-- ROW -->
  		<!-- MAIN CONTENT START -->
    	<div class="col-md-8 main-content">
      	<div class="blog-post"><!-- ARTICLE CONTAINER -->
      		<% posts.docs.forEach(function(post) { %>
	      		<article>
	      			<header class="blog-post-header">
			        		<h2 class="blog-post-title"><%= post.title %></h2>
			        		<p class="article-meta text-gray">
			        			<small><i class="icon far fa-calendar-alt"></i> <%= moment(post.createdAt).format('MMMM DD, YYYY') %> Â· <span class="read text-gray"><i class="icon far fa-clock"></i> <em><%= post.read %> min read</em></span></small>
			        		</p>
			        		<small class="article-meta">
				        		<strong class="post-category">#<%= post.category %></strong>
				        		<strong class="post-tag">#<%= post.tag %></strong>
			        		</small>
						</header>

						<div class="blog-post-body">
		        			<p><%- post.body.substring(0, 300) %>[...]</p>
				        </div>

				        <footer class="blog-post-footer">
				        	<p class="blog-post-meta">
				        		<small>
				        			<i class="icon fas fa-comments"></i> <%= post.reviews.length %> <%= post.reviews.length === 1 ? 'Comment' : 'Comments' %>
				        		</small>
				        	</p>

				        	<a class="color-blue" href="/blog/<%= post.id %>" class="">
				        		Read more
				        	</a>
				        </footer>
			        </article>
		        <% }); %>
      		</div><!-- ARTICLE CONTAINER -->
      		<!-- PAGINATION -->
			<% include ../partials/paginatePosts %>
    	</div>
    	<!-- MAIN CONTENT END -->

    	<!-- SIDEBAR START -->
    	<aside class="col-md-4 blog-sidebar">
    		<% include ../partials/sidebar %>
    	</aside>
    	<!-- SIDEBAR END -->

  	</div><!-- ROW -->
</main>
<!-- MAIN SECTION START -->

<script>
	const posts = { features: <%- JSON.stringify(posts) %> };
</script>
